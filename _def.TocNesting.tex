

%\newlinechar=`\^^J

%\ifx\HCode\Undefined
  %\def\HCode#1{\message{^^J #1}}
%\fi

\newcount\c
\def\tocNesting#1{%
      \expandafter\ifx\csname level#1\endcsname\relax
          \ifnum #1=0 \HCode{<ul onclick='showHide(event)' id='menuTop'>}\fi 
          \ifnum #1>0 \HCode{<ul>}\fi 
          \expandafter\def\csname level#1\endcsname{\HCode{</ul>}}
      \fi

      \c=#1 
      \advance\c by 1

      % loop by incrementing \c until 10
      \loop
          % Invoke \level$c
            \csname level\the\c\endcsname
          % Empty the \level$c command
            \expandafter\let \csname level\the\c\endcsname\relax
          % $c++
            \advance\c by 1
      
      \ifnum\c<10 \repeat
}

%\newcount\i
\def\testthis{
  \obeyspaces
  \obeylines

  \tocNesting{2}
  \i=0
  \loop
     \message{ ^^J tocNesting{\the\i} }
     \advance\i by 1
  \ifnum\i<10\repeat
  %\show\tocNesting\relax
  %\show\tocNesting{0}
  %\show\tocNesting{1}
  \message{---- End of the macro ---------}
}
%\testthis\bye
